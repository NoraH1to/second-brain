---
title: 发布
date created: 2023-06-10
date modified: 2023-06-11
---

## [[jekyll]] 方案

无意间看到的教程[obsidian 目前最完美的免费发布方案 - 渐进式教程 — 🌱 oldwinterの数字花园](https://notes.oldwinter.top/obsidian-%E7%9B%AE%E5%89%8D%E6%9C%80%E5%AE%8C%E7%BE%8E%E7%9A%84%E5%85%8D%E8%B4%B9%E5%8F%91%E5%B8%83%E6%96%B9%E6%A1%88-%E6%B8%90%E8%BF%9B%E5%BC%8F%E6%95%99%E7%A8%8B)

部署过程中几乎没坑，就算是小白也能大概跑通

## [[Hugo]] 方案

坑比较多，但是部署后效果比[[#jekyll 方案]]好上不少，例如深色模式、全局检索

### 安装

fork 一份[jackyzha0/quartz](https://github.com/jackyzha0/quartz)，使用 `git clone` 拉到本地，进入该项目的目录

删除整个 `content` 文件夹，将[[Obsidian]]工作区关联到 `content` 文件夹，根据同步方案方式有所不同：
- [[Git]]同步：将工作区仓库添加为子模块 `git submodule add 仓库地址 content`
- 其它方案：直接将整个工作区的内容复制到 `content` 文件夹中即可

### 预览

如果需要本地预览部署后的效果，首先需要[[Golang]]版本 `>= 1.16`，其次需要[安装Hugo]([Installation | Hugo (gohugo.io)](https://gohugo.io/installation/))和 hugo-obsidian
在项目根目录中执行 `go install github.com/jackyzha0/hugo-obsidian@latest` 即可完成 hugo-obsidian 的安装

最后在项目根目录中执行 `make serve` 来启动开发服务，默认端口为 `1313`，具体看命令行输出

> [!INFO] make 命令
>
> 在[[Windows]]下需要[[安装mingw]]来支持 `make` 命令

## 配置

绝大部分配置都在 `data/config.yaml` 中修改，该文件中的内容照猫画虎将作者的信息替换成自己的即可
```yaml
name: NoraH1to # 作者名称
enableToc: true
openToc: false
enableLinkPreview: true
enableLatex: true
enableCodeBlockTitle: true
enableCodeBlockCopy: true
enableCallouts: true
enableSPA: true
enableFooter: true
enableContextualBacklinks: true
enableRecentNotes: true # 是否在主页展示最近更新的文章
enableGitHubEdit: false
enableMermaid: true
GitHubLink: https://github.com/NoraH1to/digital-garden-quartz/tree/hugo/content # 仓库地址
search:
  enableSemanticSearch: false
  operandApiKey: "REPLACE-WITH-YOUR-OPERAND-API-KEY"
  operandIndexId: "REPLACE-WITH-YOUR-OPERAND-INDEX-ID"
description:
  我的第二大脑，由 obsidian 驱动。 # 站点描述
page_title: "🧠 缸中大脑" # 主页标题
links: # 页脚的一些跳转链接
  - link_name: GitHub
    link: https://github.com/NoraH1to

```

比较重要的配置在 `config.toml` 中
```toml
baseURL = "https://garden.norah1to.com/" # 部署基础路径，必须填对
languageCode = "zh-cn" # 没有作用
defaultContentLanguage = "zh-cn" # 默认语言是英文，这行配置作者没给，查了 hugo 文档自己添加上的
relativeURLs = false
disablePathToLower = true
ignoreFiles = [] # 忽略的文件，需要根据 obsidian 实际情况来修改，我留空
summaryLength = 20
paginate = 10
enableGitInfo = true

[markup]
    [markup.tableOfContents]
        endLevel = 3
        ordered = true
        startLevel = 2
    [markup.highlight]
        noClasses = false
        anchorLineNos = false
        codeFences = true
        guessSyntax = true
        hl_Lines = ""
        lineAnchors = ""
        lineNoStart = 1
        lineNos = true
        lineNumbersInTable = true
        style = "dracula"
    [frontmatter]
        lastmod = ["date modified", "lastmod", ":git", "date", "publishDate"] # 决定用 format yaml 中的哪个字段来展示最后修改时间
        publishDate = ["date created", "publishDate", "date"] # 同上，不过是发布（创建）日期
    [markup.goldmark.renderer]
        unsafe = true

```

最近更新的文章在展示时，默认只展示 3 篇，可以在 `layouts\partials\recent.html` 中修改
```html
<div class="content-list">
  <h2>{{ i18n "recent_notes" }}</h2>
  {{$notes := .Site.RegularPages.ByLastmod.Reverse}}
  <!-- 改成 6 篇 -->
  {{partial "page-list.html" (first 6 $notes)}}
</div>
```